<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‰å…¨éªŒè¯ç³»ç»Ÿ</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }

        .login-container {
            width: 400px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 2;
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff0000, #00ff00, #0000ff, #ff0000);
            z-index: -1;
            border-radius: 22px;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .login-container.security-alert::before {
            opacity: 0.3;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 25px;
            position: relative;
        }

        input {
            width: 100%;
            padding: 16px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            color: #2c3e50;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        input:disabled {
            background: #f5f5f5;
            cursor: not-allowed;
        }

        .password-strength {
            height: 4px;
            margin-top: 8px;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        button:active:not(:disabled) {
            transform: translateY(0);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none !important;
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        button:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        #message {
            color: #ff6b6b;
            text-align: center;
            margin-top: 20px;
            min-height: 24px;
            font-weight: 500;
            font-size: 14px;
            line-height: 1.4;
        }

        .message-success {
            color: #4CAF50 !important;
        }

        .message-warning {
            color: #ff9800 !important;
        }

        .locked {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
        }

        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 15s infinite linear;
        }

        .floating-element:nth-child(1) {
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-element:nth-child(2) {
            top: 60%;
            left: 80%;
            animation-delay: -5s;
        }

        .floating-element:nth-child(3) {
            top: 80%;
            left: 20%;
            animation-delay: -10s;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            100% {
                transform: translate(100px, 100px) rotate(360deg);
            }
        }

        .attempt-counter {
            text-align: center;
            margin-top: 15px;
            font-size: 12px;
            color: #666;
            opacity: 0.7;
        }

        .security-indicator {
            height: 4px;
            background: #4CAF50;
            border-radius: 2px;
            margin-top: 10px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- æµ®åŠ¨èƒŒæ™¯å…ƒç´  -->
    <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
    </div>

    <!-- ç™»å½•å®¹å™¨ -->
    <div class="login-container" id="loginContainer">
        <h2>
            <span>ğŸ”’</span>
            å®‰å…¨è®¿é—®éªŒè¯
        </h2>
        
        <div class="input-group">
            <input 
                type="password" 
                id="password" 
                placeholder="ğŸ”‘ è¯·è¾“å…¥è®¿é—®å¯†ç "
                autocomplete="off"
                spellcheck="false"
                maxlength="50"
            >
            <!-- å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨ -->
            <div class="password-strength" id="passwordStrength"></div>
        </div>
        
        <!-- å®‰å…¨ç­‰çº§æŒ‡ç¤ºå™¨ -->
        <div class="security-indicator" id="securityIndicator" style="width: 100%;"></div>
        
        <button type="button" id="submitBtn">
            <span id="btnText">éªŒè¯èº«ä»½</span>
            <span id="btnLoading" style="display: none;">â³ éªŒè¯ä¸­...</span>
        </button>
        
        <div class="attempt-counter">
            å½“å‰IPå°è¯•æ¬¡æ•°: <span id="attemptCount">0</span> / 2
        </div>
        
        <div id="message"></div>
    </div>

    <script>
        // å¢å¼ºæ··æ·†çš„é…ç½®
        const SECURITY_CONFIG = {
            // å¯†ç ç¼–ç ï¼ˆå¤šå±‚æ··æ·†ï¼‰
            encodedData: {
                phase1: "4B",
                phase2: "6A",
                checksum: "181"  // 
            },
            // æœ€å¤§å°è¯•æ¬¡æ•°
            maxAttempts: 2,
            // é”å®šæ—¶é—´ï¼ˆç§’ï¼‰
            lockTime: 1800,
            // æ˜¯å¦å¯ç”¨è°ƒè¯•æ£€æµ‹
            enableDebugDetection: true,
            // å®‰å…¨æ£€æŸ¥é—´éš”ï¼ˆæ¯«ç§’ï¼‰
            securityCheckInterval: 500
        };

        // çŠ¶æ€ç®¡ç†
        const AppState = {
            attempts: parseInt(localStorage.getItem('secAttempts')) || 0,
            lockUntil: parseInt(localStorage.getItem('secLockUntil')) || 0,
            sessionStart: Date.now(),
            lastInputTime: 0,
            isDebugging: false
        };

        // DOM å…ƒç´ å¼•ç”¨
        const elements = {
            passwordInput: document.getElementById('password'),
            submitBtn: document.getElementById('submitBtn'),
            btnText: document.getElementById('btnText'),
            btnLoading: document.getElementById('btnLoading'),
            message: document.getElementById('message'),
            loginContainer: document.getElementById('loginContainer'),
            attemptCount: document.getElementById('attemptCount'),
            passwordStrength: document.getElementById('passwordStrength'),
            securityIndicator: document.getElementById('securityIndicator')
        };

        // ======================
        // å®‰å…¨å·¥å…·å‡½æ•°
        // ======================
        
        // æ··æ·†çš„è§£ç å‡½æ•°
        function decodePassword() {
            try {
                // å¤šå±‚è§£ç 
                const phase1 = String.fromCharCode(
                    parseInt(SECURITY_CONFIG.encodedData.phase1, 16) - 10
                );
                const phase2 = String.fromCharCode(
                    parseInt(SECURITY_CONFIG.encodedData.phase2, 16) - 20
                );
                
                // éªŒè¯æ ¡éªŒå’Œ
                const checkVal = parseInt(SECURITY_CONFIG.encodedData.phase1, 16) + 
                                parseInt(SECURITY_CONFIG.encodedData.phase2, 16);
                
                if (checkVal !== parseInt(SECURITY_CONFIG.encodedData.checksum, 10)) {
                    throw new Error('å®‰å…¨æ£€æŸ¥å¤±è´¥');
                }
                
                return phase1 + phase2;
            } catch (error) {
                // è§£ç å¤±è´¥æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²
                return "";
            }
        }

        // éªŒè¯å‡½æ•°ï¼ˆå¢åŠ æ··æ·†ï¼‰
        function obfuscatedValidate(input, correct) {
            // æ·»åŠ æ—¶é—´æ£€æŸ¥
            const timeDiff = Date.now() - AppState.lastInputTime;
            if (timeDiff < 100) return false; // é˜²æ­¢è‡ªåŠ¨å·¥å…·
            
            // å¤æ‚éªŒè¯é€»è¾‘
            let isValid = true;
            
            // é•¿åº¦æ£€æŸ¥
            if (input.length !== correct.length) {
                isValid = false;
            } else {
                // é€å­—ç¬¦æ¯”è¾ƒ
                for (let i = 0; i < input.length; i++) {
                    if (input.charCodeAt(i) !== correct.charCodeAt(i)) {
                        isValid = false;
                        break;
                    }
                }
            }
            
            // æ·»åŠ éšæœºå»¶è¿Ÿé˜²æ­¢æ—¶é—´æ”»å‡»
            const delay = Math.random() * 100 + 50;
            return new Promise(resolve => {
                setTimeout(() => resolve(isValid), delay);
            });
        }

        // ======================
        // é˜²è°ƒè¯•åŠŸèƒ½
        // ======================
        
        function setupAntiDebug() {
            if (!SECURITY_CONFIG.enableDebugDetection) return;
            
            // æ£€æµ‹æ§åˆ¶å°æ‰“å¼€
            const consoleCheck = () => {
                const widthThreshold = window.outerWidth - window.innerWidth > 160;
                const heightThreshold = window.outerHeight - window.innerHeight > 160;
                
                if (widthThreshold || heightThreshold) {
                    triggerSecurityAlert("æ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·");
                }
            };
            
            // æ£€æµ‹è°ƒè¯•å™¨
            const debuggerCheck = () => {
                const startTime = Date.now();
                debugger;
                const endTime = Date.now();
                
                if (endTime - startTime > 100) {
                    triggerSecurityAlert("æ£€æµ‹åˆ°è°ƒè¯•æ¨¡å¼");
                    AppState.isDebugging = true;
                }
            };
            
            // å®šæœŸæ£€æŸ¥
            setInterval(consoleCheck, 1000);
            setInterval(debuggerCheck, SECURITY_CONFIG.securityCheckInterval);
            
            // é˜»æ­¢F12ã€Ctrl+Shift+Iç­‰
            document.addEventListener('keydown', (e) => {
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                    (e.ctrlKey && e.key === 'U')) {
                    e.preventDefault();
                    triggerSecurityAlert("å¿«æ·é”®å·²è¢«ç¦ç”¨");
                    return false;
                }
            });
            
            // é˜»æ­¢å³é”®èœå•
            document.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                triggerSecurityAlert("å³é”®èœå•å·²è¢«ç¦ç”¨");
                return false;
            });
        }

        function triggerSecurityAlert(reason) {
            elements.loginContainer.classList.add('security-alert');
            showMessage(`âš ï¸ å®‰å…¨è­¦å‘Š: ${reason}`, 'warning');
            
            // ä¸´æ—¶ç¦ç”¨è¡¨å•
            disableForm(true);
            
            setTimeout(() => {
                elements.loginContainer.classList.remove('security-alert');
                if (AppState.lockUntil < Date.now()) {
                    disableForm(false);
                }
            }, 5000);
        }

        // ======================
        // ä¸»é€»è¾‘å‡½æ•°
        // ======================
        
        function initialize() {
            setupAntiDebug();
            setupEventListeners();
            checkLockStatus();
            updateUI();
            
            // æ§åˆ¶å°è­¦å‘Š
            console.log('%câš ï¸ å®‰å…¨åŒºåŸŸ âš ï¸', 'color: red; font-size: 20px; font-weight: bold;');
            console.log('%cæœªç»æˆæƒçš„è®¿é—®å°è¯•å°†è¢«è®°å½•', 'color: orange;');
        }

        function setupEventListeners() {
            elements.submitBtn.addEventListener('click', handleSubmit);
            
            elements.passwordInput.addEventListener('input', (e) => {
                AppState.lastInputTime = Date.now();
                updatePasswordStrength(e.target.value);
            });
            
            elements.passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !elements.submitBtn.disabled) {
                    handleSubmit();
                }
            });
            
            // é˜²æ­¢å¤åˆ¶ç²˜è´´
            elements.passwordInput.addEventListener('paste', (e) => {
                e.preventDefault();
                showMessage("âš ï¸ ä¸ºäº†å®‰å…¨ï¼Œç¦æ­¢ç²˜è´´", 'warning');
            });
            
            elements.passwordInput.addEventListener('copy', (e) => {
                e.preventDefault();
                showMessage("âš ï¸ ç¦æ­¢å¤åˆ¶", 'warning');
            });
        }

        async function handleSubmit() {
            if (AppState.lockUntil > Date.now() || AppState.isDebugging) return;
            
            const input = elements.passwordInput.value.trim();
            
            if (!input) {
                showMessage("è¯·è¾“å…¥å¯†ç ", 'warning');
                shakeInput();
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            showLoading(true);
            
            try {
                // è·å–æ­£ç¡®å¯†ç 
                const correctPassword = decodePassword();
                
                // éªŒè¯å¯†ç 
                const isValid = await obfuscatedValidate(input, correctPassword);
                
                if (isValid) {
                    await handleSuccess();
                } else {
                    await handleFailure();
                }
            } catch (error) {
                showMessage("éªŒè¯è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯", 'warning');
            } finally {
                showLoading(false);
            }
        }

        async function handleSuccess() {
            showMessage("âœ“ éªŒè¯æˆåŠŸï¼Œæ­£åœ¨å‡†å¤‡è·³è½¬...", 'success');
            
            // æ›´æ–°å®‰å…¨æŒ‡ç¤ºå™¨
            elements.securityIndicator.style.background = '#4CAF50';
            elements.securityIndicator.style.width = '100%';
            
            // æ¸…é™¤æœ¬åœ°å­˜å‚¨
            localStorage.removeItem('secAttempts');
            localStorage.removeItem('secLockUntil');
            
            // æ··æ·†è·³è½¬URL
            const redirectUrl = atob("aHR0cHM6Ly9taXNzYXYud3MvZG0xNC9jbg==");
            
            // æ·»åŠ å»¶è¿Ÿå¹¶è·³è½¬
            await new Promise(resolve => setTimeout(resolve, 2000));
            window.location.href = redirectUrl;
        }

        async function handleFailure() {
            AppState.attempts++;
            localStorage.setItem('secAttempts', AppState.attempts);
            
            updateUI();
            
            if (AppState.attempts >= SECURITY_CONFIG.maxAttempts) {
                const lockUntil = Date.now() + SECURITY_CONFIG.lockTime * 1000;
                AppState.lockUntil = lockUntil;
                localStorage.setItem('secLockUntil', lockUntil);
                
                lockAccount();
                startCountdown();
            } else {
                const remaining = SECURITY_CONFIG.maxAttempts - AppState.attempts;
                showMessage(`âœ— å¯†ç é”™è¯¯ (å‰©ä½™å°è¯•æ¬¡æ•°: ${remaining})`, 'error');
                shakeInput();
            }
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            elements.passwordInput.value = '';
        }

        function checkLockStatus() {
            const now = Date.now();
            if (AppState.lockUntil > now) {
                const remaining = Math.ceil((AppState.lockUntil - now) / 1000);
                showLockMessage(remaining);
                disableForm(true);
                startCountdown();
            }
        }

        function lockAccount() {
            disableForm(true);
            showMessage("â›” è´¦æˆ·å·²è¢«é”å®š", 'error');
            elements.securityIndicator.style.background = '#f44336';
            elements.securityIndicator.style.width = '10%';
        }

        function startCountdown() {
            const countdownInterval = setInterval(() => {
                const remaining = Math.ceil((AppState.lockUntil - Date.now()) / 1000);
                
                if (remaining <= 0) {
                    clearInterval(countdownInterval);
                    localStorage.removeItem('secAttempts');
                    localStorage.removeItem('secLockUntil');
                    disableForm(false);
                    showMessage('');
                    AppState.attempts = 0;
                    updateUI();
                    elements.securityIndicator.style.width = '100%';
                    elements.securityIndicator.style.background = '#4CAF50';
                } else {
                    showLockMessage(remaining);
                    
                    // æ›´æ–°å®‰å…¨æŒ‡ç¤ºå™¨
                    const progress = (remaining / SECURITY_CONFIG.lockTime) * 100;
                    elements.securityIndicator.style.width = `${100 - progress}%`;
                    elements.securityIndicator.style.background = 
                        `linear-gradient(90deg, #f44336 ${100 - progress}%, #4CAF50 ${100 - progress}%)`;
                }
            }, 1000);
        }

        // ======================
        // UI ç›¸å…³å‡½æ•°
        // ======================
        
        function showMessage(text, type = 'error') {
            elements.message.textContent = text;
            elements.message.className = '';
            
            switch(type) {
                case 'success':
                    elements.message.classList.add('message-success');
                    break;
                case 'warning':
                    elements.message.classList.add('message-warning');
                    break;
                case 'error':
                default:
                    // é»˜è®¤çº¢è‰²
                    break;
            }
        }

        function showLockMessage(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            showMessage(
                `â›” è´¦æˆ·å·²é”å®š\n${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')} åå¯é‡è¯•`,
                'warning'
            );
        }

        function showLoading(loading) {
            if (loading) {
                elements.btnText.style.display = 'none';
                elements.btnLoading.style.display = 'inline';
                elements.submitBtn.disabled = true;
            } else {
                elements.btnText.style.display = 'inline';
                elements.btnLoading.style.display = 'none';
                elements.submitBtn.disabled = elements.passwordInput.disabled;
            }
        }

        function disableForm(disabled) {
            elements.passwordInput.disabled = disabled;
            elements.submitBtn.disabled = disabled;
        }

        function shakeInput() {
            elements.passwordInput.classList.add('locked');
            setTimeout(() => {
                elements.passwordInput.classList.remove('locked');
            }, 500);
        }

        function updateUI() {
            elements.attemptCount.textContent = AppState.attempts;
            
            // æ›´æ–°å®‰å…¨æŒ‡ç¤ºå™¨é¢œè‰²
            if (AppState.attempts === 0) {
                elements.securityIndicator.style.background = '#4CAF50';
            } else if (AppState.attempts === 1) {
                elements.securityIndicator.style.background = '#ff9800';
            } else {
                elements.securityIndicator.style.background = '#f44336';
            }
        }

        function updatePasswordStrength(password) {
            const strength = password.length > 0 ? Math.min(password.length * 10, 100) : 0;
            elements.passwordStrength.style.width = `${strength}%`;
            
            // æ ¹æ®é•¿åº¦æ”¹å˜é¢œè‰²
            if (password.length === 0) {
                elements.passwordStrength.style.background = 'transparent';
            } else if (password.length < 2) {
                elements.passwordStrength.style.background = '#f44336';
            } else if (password.length < 4) {
                elements.passwordStrength.style.background = '#ff9800';
            } else {
                elements.passwordStrength.style.background = '#4CAF50';
            }
        }

        // ======================
        // åˆå§‹åŒ–
        // ======================
        document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>